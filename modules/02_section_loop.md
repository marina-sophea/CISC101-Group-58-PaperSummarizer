> Change Log (Nov 28, 2025)
> - Added `summary_level` parameter ("short" or "detailed") for per-section summaries.
> - Updated section loop logic to branch behavior based on `summary_level`.
> - For `summary_level = "detailed"`, added requirement to produce a paragraph plus 3–5 bullet points.

# Module 02 — Section Loop

## Purpose

This module loops over each section of the paper and generates a summary that respects the specification constraints (section order, word limits, neutral academic tone, and “only use what’s in the paper”). It now supports two summary levels: a short mode and a detailed mode.

## Inputs

- `sections`: ordered list of section objects, each with:
  - `title`
  - `text`
  - `word_count`
- `target_audience`: audience description (e.g., “first-year undergraduate”, “expert researcher”).
- `summary_level`: string flag controlling summary detail level:
  - `"short"` → 1–2 sentences per section.
  - `"detailed"` → short paragraph plus 3–5 bullet points per section.
- Outputs and warnings from Module 01 and constraints/flags from Module 03:
  - indicators for missing or empty sections
  - indicators for sections with `< 50` words
  - evidence guardrails (e.g., `evidence_mode`)

## Outputs

For each section, the module produces:

- A summary that:
  - Appears in the same order as the original sections.
  - Includes the section title label (e.g., “Methods Summary”).
  - Respects tone and evidence constraints.
- In `"short"` mode:
  - 1–2 sentence summary, within the 50–100 word constraint.
- In `"detailed"` mode:
  - A short paragraph (still respecting the 50–100 word guidance where possible).
  - A bullet list of 3–5 key points capturing important claims, results, or arguments.
- Passes along any warning messages (e.g., missing/short section) generated by Module 03.

## Behavior and Logic

1. **Initialize Loop**
   - For each section in `sections`, preserve the original order.
   - Check if the section is marked missing, empty, or `< 50` words using inputs from Module 01 and Module 03.

2. **Handle Missing or Too-Short Sections**
   - If the section has no usable text:
     - Do not attempt to fabricate a summary.
     - Attach the standardized warning from Module 03 (e.g., “Section skipped: no usable text was provided.”).
   - If the section is very short (`< 50` words):
     - Generate a summary based strictly on the available text.
     - Attach the standardized warning from Module 03 (e.g., “Section very short: summary may be incomplete.”).

3. **Apply Evidence Guardrails**
   - Respect `evidence_mode` from Module 03:
     - In strict mode, only include claims, equations, and results that clearly appear in the section text.
     - If there is not enough information to summarize safely, use the standard strict-mode message from Module 03.

4. **Generate Summary Based on `summary_level`**
   - **If `summary_level = "short"`:**
     - Produce a compact summary of 1–2 sentences.
     - Focus on the section’s main purpose, key ideas, and important findings.
     - Stay within 50–100 words.
   - **If `summary_level = "detailed"`:**
     - Produce a short paragraph that still respects the general 50–100 word guidance where possible.
     - Then generate a bullet list of **3–5 key points**, each point:
       - Derived directly from the section text.
       - Highlighting important claims, methods, results, or arguments.
     - Do not introduce information that is not present in the source text.

5. **Tone and Terminology**
   - Use a consistent, neutral academic tone.
   - Keep technical terms unchanged.
   - Briefly explain specialized terms the first time they appear, tailored to the `target_audience`.

6. **Append to Global Outputs**
   - Add each section’s output (label + summary + optional bullets + warnings) to the overall structure used by:
     - the section-by-section table
     - the unified paper summary
     - expert and lay summaries

Module 2 — Section Loop
Short Name: Section Summarizer Description: This module iterates through each section of the paper, generating a concise summary between 50–100 words. It enforces the no-added-information rule and ensures each summary captures the section’s purpose, key ideas, and findings. Warnings are logged if constraints are violated.

Inputs:

Individual section text

Metadata (section title)

Outputs:

Section summary (50–100 words)

Warning logs for constraint violations

Key Constraints/Checks:

Section title precedes summary

Word count ≤100 words

No external information introduced
